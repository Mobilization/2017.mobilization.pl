// Generated by CoffeeScript 1.9.1
(function() {
  var DocPad, action, docpadConfig, docpadUtil, getArgument;

  DocPad = require('../lib/docpad');

  docpadUtil = require('../lib/util');

  getArgument = function(name, value, defaultValue) {
    var argumentIndex, result;
    if (value == null) {
      value = null;
    }
    if (defaultValue == null) {
      defaultValue = null;
    }
    result = defaultValue;
    argumentIndex = process.argv.indexOf("--" + name);
    if (argumentIndex !== -1) {
      result = value != null ? value : process.argv[argumentIndex + 1];
    }
    return result;
  };

  action = getArgument('action', null, 'server generate');

  docpadConfig = {};

  docpadConfig.port = (function() {
    var port;
    port = getArgument('port');
    if (port && isNaN(port) === false) {
      port = parseInt(port, 10);
    }
    return port;
  })();

  new DocPad(docpadConfig, function(err, docpad) {
    if (err) {
      return docpadUtil.writeError(err);
    }
    return docpad.action(action, function(err) {
      if (err) {
        return docpadUtil.writeError(err);
      }
      return console.log('OK');
    });
  });

}).call(this);
